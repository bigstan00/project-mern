{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{DndProvider}from'react-dnd';import{HTML5Backend}from'react-dnd-html5-backend';import TodoItem from'./TodoItem';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Todos(_ref){let{data,setData}=_ref;const[showTodoItem,setShowTodoItem]=useState(\"all\");const[loading,setLoading]=useState(false);const Fetch=async()=>{setLoading(true);const todo=await axios.get(\"http://localhost:3500/todo\");let todoItem=await todo.data;setLoading(false);return todoItem;};useEffect(()=>{const fetchData=async()=>{let fetchTodo=await Fetch();setData(fetchTodo);};fetchData();},[]);const moveTodo=async(fromIndex,toIndex)=>{const updatedData=[...data];const[movedTodo]=updatedData.splice(fromIndex,1);updatedData.splice(toIndex,0,movedTodo);const prevData=[...data];try{await axios.post(\"http://localhost:3500/rearrange-todos\",{newOrder:updatedData});setData(updatedData);}catch(error){console.error(error);setData(prevData);}};const clearComplete=async()=>{try{let response=await axios.delete(\"http://localhost:3500/complete/todo\");if(response.data.status){setData(response.data.data);}}catch(error){console.error(error);}};const showComplete=async()=>{try{let fetchTodo=await Fetch();let complete=fetchTodo.filter(item=>item.isCompleted==true);setData(complete);setShowTodoItem(\"complete\");}catch(error){console.error(\"Error fetching completed todos\",error);}};const showAll=async()=>{let fetchTodo=await Fetch();setData(fetchTodo);setShowTodoItem(\"all\");};const showActive=async()=>{let fetchTodo=await Fetch();let active=fetchTodo.filter(item=>item.isCompleted!==true);setData(active);setShowTodoItem(\"active\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list_todo\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"loadingCenter\",children:/*#__PURE__*/_jsx(\"div\",{class:\"lds-dual-ring\"})}):/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:data.length==0?/*#__PURE__*/_jsx(\"div\",{className:\"no-todo\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No todo available now\"})}):/*#__PURE__*/_jsx(\"ul\",{children:data.map((todo,index)=>/*#__PURE__*/_jsx(TodoItem,{todo:todo,index:index,moveTodo:moveTodo,setData:setData},todo._id))},\"todo-list\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:data.length}),\" items left\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"bottom__section\",children:[/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='all'&&'active'}`,onClick:showAll,children:\"All\"}),/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='active'&&'active'}`,onClick:showActive,children:\"Active\"}),/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='complete'&&'active'}`,onClick:showComplete,children:\"Completed\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"clear\",onClick:clearComplete,children:\"Clear Completed\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Drag and drop to reorder list\"})})]});}export default Todos;","map":{"version":3,"names":["React","useEffect","useState","axios","DndProvider","HTML5Backend","TodoItem","jsx","_jsx","jsxs","_jsxs","Todos","_ref","data","setData","showTodoItem","setShowTodoItem","loading","setLoading","Fetch","todo","get","todoItem","fetchData","fetchTodo","moveTodo","fromIndex","toIndex","updatedData","movedTodo","splice","prevData","post","newOrder","error","console","clearComplete","response","delete","status","showComplete","complete","filter","item","isCompleted","showAll","showActive","active","className","children","class","backend","length","map","index","_id","onClick"],"sources":["/home/bigstan/mern-redo/frontend/src/components/Todos.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport TodoItem from './TodoItem';\n\nfunction Todos({data, setData}) {\n\n    const[showTodoItem, setShowTodoItem] = useState(\"all\")\n    const [loading, setLoading] = useState(false);\n\n    const Fetch = async () => {\n        setLoading(true);\n        const todo = await axios.get(\"http://localhost:3500/todo\")\n        let todoItem = await todo.data\n        setLoading(false);\n        return todoItem\n    }\n\n    useEffect(() => {\n        const fetchData = async () => {\n            let fetchTodo = await Fetch();\n            setData(fetchTodo);\n        }\n        \n        fetchData();\n    }, [])\n\n    const moveTodo = async (fromIndex, toIndex) => {\n        const updatedData = [...data];\n        const [movedTodo] = updatedData.splice(fromIndex, 1);\n        updatedData.splice(toIndex, 0, movedTodo);\n\n        const prevData = [...data];\n\n        try {\n            await axios.post(\"http://localhost:3500/rearrange-todos\", {newOrder: updatedData})\n            setData(updatedData);\n        } catch (error) {\n            console.error(error);\n            setData(prevData);\n        }\n    };\n\n    const clearComplete = async () => {\n        try {\n            let response = await axios.delete(\"http://localhost:3500/complete/todo\")\n            if(response.data.status){\n                setData(response.data.data)\n            }   \n        } catch (error) {\n            console.error(error);\n            \n        }\n    }\n\n    const showComplete = async () => {\n        try {\n            let fetchTodo = await Fetch()\n            let complete = fetchTodo.filter(item => item.isCompleted == true)\n            setData(complete)\n            setShowTodoItem(\"complete\")\n        } catch (error) {\n            console.error(\"Error fetching completed todos\", error);\n        }\n    }\n\n    const showAll = async () => {\n        let fetchTodo = await Fetch()\n        setData(fetchTodo);\n        setShowTodoItem(\"all\")\n    }\n\n    const showActive = async () => {\n        let fetchTodo = await Fetch()\n        let active = fetchTodo.filter(item => item.isCompleted !== true)\n        setData(active)\n        setShowTodoItem(\"active\")\n    }\n\n  return (\n   <div className=\"list\">\n        <div className=\"list_todo\">\n            {\n                loading ? (\n                    <div className=\"loadingCenter\">\n                        <div class=\"lds-dual-ring\"></div>\n                    </div>\n                ) : (\n                    <DndProvider backend={HTML5Backend}>\n                        {\n                            data.length == 0 ? <div className='no-todo'>\n                                <p>No todo available now</p>\n                            </div> : \n                            <ul key=\"todo-list\">\n                                {\n                                    data.map((todo, index) => (\n                                        <TodoItem key={todo._id} todo={todo} index={index} moveTodo={moveTodo} setData={setData} />\n                                    ))\n                                }\n                            </ul>\n                        }\n                    </DndProvider>\n                )\n            }\n            \n\n            <div className=\"bottom\">\n                <p><span>{data.length}</span> items left</p>\n\n                <ul className='bottom__section'>\n                    <li className={`${showTodoItem == 'all' && 'active'}`} onClick={showAll}>All</li>\n                    <li className={`${showTodoItem == 'active' && 'active'}`} onClick={showActive}>Active</li>\n                    <li className={`${showTodoItem == 'complete' && 'active'}`} onClick={showComplete}>Completed</li>\n                </ul>\n\n                <p className='clear' onClick={clearComplete}>Clear Completed</p>\n            </div>\n        \n        </div>\n\n        <div className=\"footer\">\n            <p>Drag and drop to reorder list</p>\n        </div>\n   </div>\n  )\n}\n\nexport default Todos\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}