{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{DndProvider}from'react-dnd';import{HTML5Backend}from'react-dnd-html5-backend';import TodoItem from'./TodoItem';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Todos(_ref){let{data,setData}=_ref;const[showTodoItem,setShowTodoItem]=useState(\"all\");const[loading,setLoading]=useState(false);const Fetch=async()=>{setLoading(true);const apiUrl=process.env.REACT_APP_API_URL;// Access the API URL from the environment variable\nconst todo=await axios.get(`${apiUrl}/todo`);let todoItem=await todo.data;setLoading(false);return todoItem;};useEffect(()=>{const fetchData=async()=>{let fetchTodo=await Fetch();setData(fetchTodo);};fetchData();},[]);const moveTodo=async(fromIndex,toIndex)=>{const updatedData=[...data];const[movedTodo]=updatedData.splice(fromIndex,1);updatedData.splice(toIndex,0,movedTodo);try{const apiUrl=process.env.REACT_APP_API_URL;// Use API URL from the environment variable\nawait axios.patch(`${apiUrl}/todo/reorder`,{newOrder:updatedData});setData(updatedData);}catch(error){console.error(\"Error reordering todos:\",error);setData(data);// Revert on error\n}};const clearComplete=async()=>{try{const apiUrl=process.env.REACT_APP_API_URL;// Use API URL from the environment variable\nlet response=await axios.delete(`${apiUrl}/todo/clear-completed`);if(response.data.status){setData(response.data.data);}}catch(error){console.error(error);}};const showComplete=async()=>{try{let fetchTodo=await Fetch();let complete=fetchTodo.filter(item=>item.isCompleted==true);setData(complete);setShowTodoItem(\"complete\");}catch(error){console.error(\"Error fetching completed todos\",error);}};const showAll=async()=>{let fetchTodo=await Fetch();setData(fetchTodo);setShowTodoItem(\"all\");};const showActive=async()=>{let fetchTodo=await Fetch();let active=fetchTodo.filter(item=>item.isCompleted!==true);setData(active);setShowTodoItem(\"active\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list_todo\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"loadingCenter\",children:/*#__PURE__*/_jsx(\"div\",{class:\"lds-dual-ring\"})}):/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:data.length==0?/*#__PURE__*/_jsx(\"div\",{className:\"no-todo\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No todo available now\"})}):/*#__PURE__*/_jsx(\"ul\",{children:data.map((todo,index)=>/*#__PURE__*/_jsx(TodoItem,{todo:todo,index:index,moveTodo:moveTodo,setData:setData},todo._id))},\"todo-list\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:data.length}),\" items left\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"bottom__section\",children:[/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='all'&&'active'}`,onClick:showAll,children:\"All\"}),/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='active'&&'active'}`,onClick:showActive,children:\"Active\"}),/*#__PURE__*/_jsx(\"li\",{className:`${showTodoItem=='complete'&&'active'}`,onClick:showComplete,children:\"Completed\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"clear\",onClick:clearComplete,children:\"Clear Completed\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Drag and drop to reorder list\"})})]});}export default Todos;","map":{"version":3,"names":["React","useEffect","useState","axios","DndProvider","HTML5Backend","TodoItem","jsx","_jsx","jsxs","_jsxs","Todos","_ref","data","setData","showTodoItem","setShowTodoItem","loading","setLoading","Fetch","apiUrl","process","env","REACT_APP_API_URL","todo","get","todoItem","fetchData","fetchTodo","moveTodo","fromIndex","toIndex","updatedData","movedTodo","splice","patch","newOrder","error","console","clearComplete","response","delete","status","showComplete","complete","filter","item","isCompleted","showAll","showActive","active","className","children","class","backend","length","map","index","_id","onClick"],"sources":["/home/bigstan/mern-redo/frontend/src/components/Todos.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport TodoItem from './TodoItem';\n\nfunction Todos({data, setData}) {\n\n    const[showTodoItem, setShowTodoItem] = useState(\"all\")\n    const [loading, setLoading] = useState(false);\n\n    const Fetch = async () => {\n        setLoading(true);\n        const apiUrl = process.env.REACT_APP_API_URL; // Access the API URL from the environment variable\n        const todo = await axios.get(`${apiUrl}/todo`);\n        let todoItem = await todo.data;\n        setLoading(false);\n        return todoItem;\n    }\n\n    useEffect(() => {\n        const fetchData = async () => {\n            let fetchTodo = await Fetch();\n            setData(fetchTodo);\n        }\n        \n        fetchData();\n    }, [])\n\n    const moveTodo = async (fromIndex, toIndex) => {\n        const updatedData = [...data];\n        const [movedTodo] = updatedData.splice(fromIndex, 1);\n        updatedData.splice(toIndex, 0, movedTodo);\n    \n        try {\n            const apiUrl = process.env.REACT_APP_API_URL; // Use API URL from the environment variable\n            await axios.patch(`${apiUrl}/todo/reorder`, { newOrder: updatedData });\n            setData(updatedData);\n        } catch (error) {\n            console.error(\"Error reordering todos:\", error);\n            setData(data); // Revert on error\n        }\n    };\n\n    const clearComplete = async () => {\n        try {\n            const apiUrl = process.env.REACT_APP_API_URL; // Use API URL from the environment variable\n            let response = await axios.delete(`${apiUrl}/todo/clear-completed`);\n            if(response.data.status){\n                setData(response.data.data)\n            }   \n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    const showComplete = async () => {\n        try {\n            let fetchTodo = await Fetch()\n            let complete = fetchTodo.filter(item => item.isCompleted == true)\n            setData(complete)\n            setShowTodoItem(\"complete\")\n        } catch (error) {\n            console.error(\"Error fetching completed todos\", error);\n        }\n    }\n\n    const showAll = async () => {\n        let fetchTodo = await Fetch()\n        setData(fetchTodo);\n        setShowTodoItem(\"all\")\n    }\n\n    const showActive = async () => {\n        let fetchTodo = await Fetch()\n        let active = fetchTodo.filter(item => item.isCompleted !== true)\n        setData(active)\n        setShowTodoItem(\"active\")\n    }\n\n  return (\n   <div className=\"list\">\n        <div className=\"list_todo\">\n            {\n                loading ? (\n                    <div className=\"loadingCenter\">\n                        <div class=\"lds-dual-ring\"></div>\n                    </div>\n                ) : (\n                    <DndProvider backend={HTML5Backend}>\n                        {\n                            data.length == 0 ? <div className='no-todo'>\n                                <p>No todo available now</p>\n                            </div> : \n                            <ul key=\"todo-list\">\n                                {\n                                    data.map((todo, index) => (\n                                        <TodoItem key={todo._id} todo={todo} index={index} moveTodo={moveTodo} setData={setData} />\n                                    ))\n                                }\n                            </ul>\n                        }\n                    </DndProvider>\n                )\n            }\n            \n\n            <div className=\"bottom\">\n                <p><span>{data.length}</span> items left</p>\n\n                <ul className='bottom__section'>\n                    <li className={`${showTodoItem == 'all' && 'active'}`} onClick={showAll}>All</li>\n                    <li className={`${showTodoItem == 'active' && 'active'}`} onClick={showActive}>Active</li>\n                    <li className={`${showTodoItem == 'complete' && 'active'}`} onClick={showComplete}>Completed</li>\n                </ul>\n\n                <p className='clear' onClick={clearComplete}>Clear Completed</p>\n            </div>\n        \n        </div>\n\n        <div className=\"footer\">\n            <p>Drag and drop to reorder list</p>\n        </div>\n   </div>\n  )\n}\n\nexport default Todos\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}