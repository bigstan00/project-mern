+ SERVICE_NAME=backend
+ COMPOSE_FILE=/home/bigstan/mern-redo/docker-compose.yaml
+ MAX_INSTANCES=5
+ MIN_INSTANCES=1
+ CPU_THRESHOLD_UP=75
+ CPU_THRESHOLD_DOWN=30
+ LOG_FILE=/home/bigstan/mern-redo/backend/scale.log
+ LOG_INTERVAL=300
+ last_log_time=0
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944002
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944122
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944243
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944363
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ + echo No scaling action needed for backend
tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944483
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944604
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944724
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944845
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729944965
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ grep backend
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945086
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945206
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ + echo No scaling action needed for backend
tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945327
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945447
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ + + wc -l
docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
grep backend
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945568
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945688
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945808
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729945929
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ + tee -a /home/bigstan/mern-redo/backend/scale.log
echo No scaling action needed for backend
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946049
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946170
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946290
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946411
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946531
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946652
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946772
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ + wc -l
grep backend
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729946893
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729947013
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
+ true
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps
+ grep backend
+ wc -l
+ current_instances=0
+ get_cpu_usage
+ docker compose -f /home/bigstan/mern-redo/docker-compose.yaml ps -q backend
+ container_ids=
+ [ -z  ]
+ echo 0
+ return
+ cpu_usage=0
+ date +%s
+ current_time=1729947133
+ current_time - last_log_time LOG_INTERVAL
/home/bigstan/mern-redo/backend/scale.sh: 462: current_time: not found
+ [ 0 -gt 75 ]
+ [ 0 -lt 30 ]
+ [ 0 -gt 1 ]
+ echo No scaling action needed for backend
+ tee -a /home/bigstan/mern-redo/backend/scale.log
No scaling action needed for backend
+ sleep 120
